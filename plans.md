# ğŸ“Œ ap-grass-tracker å®Œå…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆCI / TDD / DB / UI çµ±åˆç‰ˆï¼‰

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€**CIãƒ»Lintãƒ»ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã‚’å‰æã¨ã—ã€  
å¿œç”¨æƒ…å ±æŠ€è¡“è€…è©¦é¨“å‘ã‘ã®å­¦ç¿’æˆ¦ç•¥ã‚’ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã¨ã—ã¦å®Ÿè£…ã™ã‚‹**ã“ã¨ã‚’ç›®çš„ã¨ã™ã‚‹ã€‚

---

## 0. é–‹ç™ºå‰æï¼ˆæœ€é‡è¦ï¼‰

- ã™ã¹ã¦ã®å¤‰æ›´ã¯ CI ã‚’é€šéã—ãªã‘ã‚Œã°ãªã‚‰ãªã„
- å®Ÿè£…ã¯ **Jest ã‚’ç”¨ã„ãŸãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆTDDï¼‰** ã§é€²ã‚ã‚‹
- Lint è­¦å‘Šãƒ»å‹ã‚¨ãƒ©ãƒ¼ãƒ»ãƒ†ã‚¹ãƒˆå¤±æ•—ã¯ **å³ä¿®æ­£å¯¾è±¡**
- ã€Œå‹•ããŒå£Šã‚Œã¦ã„ã‚‹ã€ã€Œèª­ã‚ãªã„ãŒå‹•ãã€ã‚’è¨±å®¹ã—ãªã„

---

## 1. ç›®çš„

å¿œç”¨æƒ…å ±æŠ€è¡“è€…è©¦é¨“å‘ã‘ã®å­¦ç¿’é€²æ—ç®¡ç†ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ã€‚  
å­¦ç¿’æ™‚é–“ã¯ä¸€åˆ‡æ‰±ã‚ãšã€ã€Œåˆ†é‡ã”ã¨ã®å‘¨å›ã€ã¨ã€Œæ­£ç­”ç‡ã€ã«åŸºã¥ã„ã¦  
**åˆæ ¼ã«å¯„ä¸ã™ã‚‹å­¦ç¿’ã ã‘ã‚’è©•ä¾¡ãƒ»å¯è¦–åŒ–**ã™ã‚‹ã€‚

---

## 2. å‰ææŠ€è¡“

- Next.jsï¼ˆApp Routerï¼‰
- TypeScriptï¼ˆstrictï¼‰
- Prisma + SQLite
- Tailwind CSS
- Jestï¼ˆãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼‰
- ESLintï¼ˆNext.js æ¨™æº–ï¼‰
- GitHub Actionsï¼ˆCIï¼‰

åˆ¶ç´„ï¼š
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å˜ä¸€ï¼ˆèªè¨¼ãªã—ï¼‰
- ä¸»ãªåˆ©ç”¨ç«¯æœ«ã¯ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³

---

## 3. CI / å“è³ªä¿è¨¼æ–¹é‡ï¼ˆéäº¤æ¸‰ï¼‰

### CI ã§å¿…ãšå®Ÿè¡Œã™ã‚‹é …ç›®
1. TypeScript å‹ãƒã‚§ãƒƒã‚¯
2. ESLintï¼ˆè­¦å‘Šã‚¼ãƒ­ï¼‰
3. Jest ãƒ†ã‚¹ãƒˆ
4. Next.js ãƒ“ãƒ«ãƒ‰

### GitHub Actionsï¼ˆ.github/workflows/ci.ymlï¼‰

```yaml
name: CI

on:
  push:
    branches: [main, "feature/**"]
  pull_request:
    branches: [main]

jobs:
  verify:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: npm
      - run: npm ci
      - run: npm run typecheck
      - run: npm run lint
      - run: npm test
      - run: npm run build
```

npm scriptsï¼ˆå¿…é ˆï¼‰

```json
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "typecheck": "tsc --noEmit",
    "lint": "next lint",
    "test": "jest --runInBand"
  }
}
```

## 4. è¨­è¨ˆæ€æƒ³

- å­¦ç¿’ã®æœ€å°å˜ä½ã¯ã€Œåˆ†é‡ã‚’1å‘¨è§£ãã€
- æ­£ç­”ç‡70%ä»¥ä¸Šã®ã¿ã‚’ã€Œæœ‰åŠ¹å‘¨å›ã€ã¨ã™ã‚‹
- æœ‰åŠ¹å‘¨å›ã ã‘ãŒé€²æ—ã¨ã—ã¦æ¨ªã«ç©ã¿ä¸ŠãŒã‚‹
- æ­£ç­”ç‡70%æœªæº€ã¯ã€Œç„¡åŠ¹å‘¨å›ï¼ˆâ–¡ï¼‰ã€ã¨ã—ã¦æ»ç•™è¡¨ç¤º
- å‘¨å›æ•°ã¯ DB ã«ä¿å­˜ã›ãšã€è¨ˆç®—å€¤ã¨ã—ã¦å°å‡º
- åŠªåŠ›é‡ã§ã¯ãªãã€Œåˆæ ¼ã«è¿‘ã¥ãè¡Œå‹•ã€ã ã‘ã‚’è©•ä¾¡ã™ã‚‹

## 5. DBæ§‹æˆï¼ˆPrismaï¼‰

### è¨­è¨ˆåŸå‰‡

- å‘¨å›ç•ªå·ãƒ»æœ‰åŠ¹ãƒ•ãƒ©ã‚°ã¯ä¿å­˜ã—ãªã„
- ãƒ­ã‚¸ãƒƒã‚¯ã¯ accuracy ã‹ã‚‰å°å‡º
- Subject ã¯å›ºå®šãƒã‚¹ã‚¿

### schema.prisma

```prisma
model Subject {
  id        Int          @id @default(autoincrement())
  name      String
  category  String       // technology | management | strategy
  cycles    StudyCycle[]
}

model StudyCycle {
  id         Int      @id @default(autoincrement())
  subjectId Int
  subject   Subject  @relation(fields: [subjectId], references: [id])
  date       DateTime @default(now())
  accuracy   Int      // 0â€“100
}
```

## 6. æœ‰åŠ¹å‘¨å›ãƒ«ãƒ¼ãƒ«ï¼ˆãƒ­ã‚¸ãƒƒã‚¯å®šç¾©ï¼‰

- accuracy â‰¥ 70 â†’ æœ‰åŠ¹å‘¨å›ï¼ˆâ– ï¼‰
- accuracy < 70 â†’ ç„¡åŠ¹å‘¨å›ï¼ˆâ–¡ï¼‰
- â€» æœ‰åŠ¹å‘¨å›æ•° = accuracy â‰¥ 70 ã®ä»¶æ•°
- â€» å‘¨å›æ•°ã¯ DB ã«ä¿å­˜ã—ãªã„

## 7. ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆTDDï¼‰æ–¹é‡

### åŸå‰‡

- å®Ÿè£…ã‚ˆã‚Šå…ˆã«ãƒ†ã‚¹ãƒˆã‚’æ›¸ã
- UI ã‚ˆã‚Šå…ˆã«ãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ†ã‚¹ãƒˆ
- pure function ã‚’åŸºæœ¬ã¨ã™ã‚‹
- ãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ãªã„ä»•æ§˜ã¯å­˜åœ¨ã—ãªã„

### ãƒ†ã‚¹ãƒˆå„ªå…ˆå¯¾è±¡ï¼ˆlib å±¤ï¼‰

- æœ‰åŠ¹å‘¨å›åˆ¤å®šï¼ˆ70%ï¼‰
- æœ‰åŠ¹å‘¨å›æ•°ã‚«ã‚¦ãƒ³ãƒˆ
- åˆæ ¼åœåˆ¤å®š
- åœæ»åˆ†é‡åˆ¤å®š
- KPI é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯
- å„ªå…ˆåº¦ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆpriorityRankMapï¼‰

## 8. æ©Ÿèƒ½ä¸€è¦§

1. åˆ†é‡ä¸€è¦§
   - å¿œç”¨æƒ…å ± 23 åˆ†é‡ï¼ˆå›ºå®šï¼‰
   - ã‚«ãƒ†ã‚´ãƒªï¼štechnology / management / strategy

2. å‘¨å›è¨˜éŒ²ï¼ˆ/logï¼‰
   - åˆ†é‡é¸æŠï¼ˆãƒœã‚¿ãƒ³å¼ï¼‰
   - æ­£ç­”ç‡å…¥åŠ›ï¼ˆä»»æ„ï¼‰
   - 1ã‚¿ãƒƒãƒ—ã§ç™»éŒ²
   - ç™»éŒ²å¾Œå³ UI åæ˜ 

3. è‰UIï¼ˆ/gridï¼‰
   - è¡¨ç¤ºãƒ«ãƒ¼ãƒ«
     - è¡Œï¼šåˆ†é‡
     - å·¦ï¼šç„¡åŠ¹å‘¨å›ï¼ˆâ–¡ï¼‰
     - å³ï¼šæœ‰åŠ¹å‘¨å›ï¼ˆâ– ï¼‰
     - â– ã®ã¿æ¨ªæ–¹å‘ã«ç©ã¿ä¸ŠãŒã‚‹
   - è‰²
     - accuracy â‰¥ 80ï¼šæ¿ƒã„ç·‘
     - accuracy 70â€“79ï¼šç·‘
     - accuracy < 70ï¼šæ ç·šï¼ˆâ–¡ï¼‰

4. åˆæ ¼ãƒ©ã‚¤ãƒ³ï¼ˆç¸¦ç·šï¼‰
   - ç›®æ¨™å‘¨å›æ•°
     - ãƒ†ã‚¯ãƒãƒ­ã‚¸ï¼š3ï¼ˆDB/NW/SEC ã¯ 4ï¼‰
     - ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆï¼š2
     - ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ï¼š2
   - UI
     - æœ‰åŠ¹å‘¨å›ã®ç›®æ¨™ä½ç½®ã«ç¸¦ç·šè¡¨ç¤º
     - ç¸¦ç·šåˆ°é”ï¼åˆæ ¼åœ

5. Statsï¼ˆ/statsï¼‰
   - è¡¨ç¤ºã™ã‚‹æŒ‡æ¨™ã¯ä»¥ä¸‹ã®ã¿ã€‚
     - åˆæ ¼åœåˆ†é‡æ•° / 23
     - ç·æœ‰åŠ¹å‘¨å›æ•° / 62
     - åœæ»åˆ†é‡æ•°ï¼ˆæŒ‘æˆ¦ã‚ã‚Šãƒ»æœ‰åŠ¹0ï¼‰
6. å„ªå…ˆåº¦ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå‹‰å¼·ã®æŒ‡æ¨™ï¼‰
   - `lib/priorityRanks.ts` ã®å„ªå…ˆé †ä½ã‚’ fire ã‚¹ã‚³ã‚¢ã¸åæ˜ 
   - å„ªå…ˆé †ä½ãŒé«˜ã„åˆ†é‡ã»ã©ã€Œä»Šæ—¥ã‚„ã‚‹åˆ†é‡ã€å€™è£œã§ä¸Šä½ã«æ¥ã‚‹
7. è©¦é¨“æ—¥ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
   - è©¦é¨“æ—¥1ã¤
   - æ®‹æ—¥æ•°è¡¨ç¤º
   - 30æ—¥æœªæº€ã§è­¦å‘Šè‰²
8. ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰
   - Tailwind dark ãƒ¢ãƒ¼ãƒ‰
   - ãƒˆã‚°ãƒ«1ã‚¿ãƒƒãƒ—
   - localStorage æ°¸ç¶šåŒ–

## 9. UI / UX åˆ¶ç´„ï¼ˆéäº¤æ¸‰ï¼‰

- å…¥åŠ›ã¯ 5 ç§’ä»¥å†…
- è¦ªæŒ‡ã®ã¿ã§æ“ä½œå¯èƒ½
- è¦‹ã‚‹ã ã‘ã§ä¸è¶³åˆ†é‡ãŒåˆ†ã‹ã‚‹
- æ©Ÿèƒ½ã‚’å¢—ã‚„ã•ãšã€åˆ¤æ–­ã‚’ UI ã«åŸ‹ã‚è¾¼ã‚€

## 10. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
app/
â”œâ”€ grid/page.tsx
â”œâ”€ log/page.tsx
â”œâ”€ stats/page.tsx
â”œâ”€ onboarding/page.tsx
components/
â”œâ”€ grass/
â”‚  â”œâ”€ Square.tsx
â”‚  â”œâ”€ SubjectRow.tsx
â”‚  â””â”€ TargetLine.tsx
lib/
â”œâ”€ prisma.ts
â”œâ”€ calc.ts
â”œâ”€ targets.ts
prisma/
â”œâ”€ schema.prisma
â”œâ”€ seed.ts
```

## 11. ã‚´ãƒ¼ãƒ«

- è‰UIã¨ç¸¦ç·šã ã‘ã§åˆæ ¼æˆ¦ç•¥ãŒåˆ†ã‹ã‚‹
- æ•°å­—ã«æŒ¯ã‚Šå›ã•ã‚Œãšã€æ­£ã—ã„å­¦ç¿’è¡Œå‹•ã‚’ç¶™ç¶šã§ãã‚‹
- ã€Œã‚„ã£ãŸæ°—ã€ã§ã¯ãªãã€Œå—ã‹ã‚‹çŠ¶æ…‹ã€ã‚’å¯è¦–åŒ–ã™ã‚‹

## 12. è£œè¶³ãƒ«ãƒ¼ãƒ«

- èªè¨¼ãƒ»é€šçŸ¥ãƒ»SNSãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã¯å®Ÿè£…ã—ãªã„
- MVPå®Œæˆå¾Œã€æ©Ÿèƒ½è¿½åŠ ã¯è¡Œã‚ãªã„
- ã“ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã¯ã€Œå®Œæˆã—ãŸã‚‰çµ‚ã‚ã‚Šã€

çµè«–

- CI ã¯ä»•æ§˜æ›¸
- ãƒ†ã‚¹ãƒˆã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- Lint ã¯è¨­è¨ˆã®ç•ªäºº
- å®Ÿè£…ã¯ãã‚Œã‚‰ã®å‰¯ç”£ç‰©
